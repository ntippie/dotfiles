#!/bin/sh

brewfile="$XDG_STATE_HOME"/Brewfile
casks="$XDG_STATE_HOME"/brew-casks.txt
formulae="$XDG_STATE_HOME"/brew-formulae.txt
app_store="$XDG_STATE_HOME"/mac-apps.txt

if ! command -v brew &>/dev/null; then
  # https://brew.sh#install
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

xargs brew install < "$casks"
xargs brew install < "$formulae"

cat "$app_store" | awk '{print $1}' | xargs mas install

# brew bundle install --file="$brewfile"
